{
"version":3,
"file":"module$node_modules$browserify_sign$browser$sign.js",
"lineCount":7,
"mappings":"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",
"sources":["node_modules/browserify-sign/browser/sign.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$browserify_sign$browser$sign\"] = function(global,require,module,exports) {\n'use strict';\n\n// much of this based on https://github.com/indutny/self-signed/blob/gh-pages/lib/rsa.js\nvar Buffer = require('safe-buffer').Buffer;\nvar createHmac = require('create-hmac');\nvar crt = require('browserify-rsa');\nvar EC = require('elliptic').ec;\nvar BN = require('bn.js');\nvar parseKeys = require('parse-asn1');\nvar curves = require('./curves.json');\n\nvar RSA_PKCS1_PADDING = 1;\n\nfunction sign(hash, key, hashType, signType, tag) {\n  var priv = parseKeys(key);\n  if (priv.curve) {\n    // rsa keys can be interpreted as ecdsa ones in openssl\n    if (signType !== 'ecdsa' && signType !== 'ecdsa/rsa') { throw new Error('wrong private key type'); }\n    return ecSign(hash, priv);\n  } else if (priv.type === 'dsa') {\n    if (signType !== 'dsa') { throw new Error('wrong private key type'); }\n    return dsaSign(hash, priv, hashType);\n  }\n  if (signType !== 'rsa' && signType !== 'ecdsa/rsa') { throw new Error('wrong private key type'); }\n  if (key.padding !== undefined && key.padding !== RSA_PKCS1_PADDING) { throw new Error('illegal or unsupported padding mode'); }\n\n  hash = Buffer.concat([tag, hash]);\n  var len = priv.modulus.byteLength();\n  var pad = [0, 1];\n  while (hash.length + pad.length + 1 < len) { pad.push(0xff); }\n  pad.push(0x00);\n  var i = -1;\n  while (++i < hash.length) { pad.push(hash[i]); }\n\n  var out = crt(pad, priv);\n  return out;\n}\n\nfunction ecSign(hash, priv) {\n  var curveId = curves[priv.curve.join('.')];\n  if (!curveId) { throw new Error('unknown curve ' + priv.curve.join('.')); }\n\n  var curve = new EC(curveId);\n  var key = curve.keyFromPrivate(priv.privateKey);\n  var out = key.sign(hash);\n\n  return Buffer.from(out.toDER());\n}\n\nfunction dsaSign(hash, priv, algo) {\n  var x = priv.params.priv_key;\n  var p = priv.params.p;\n  var q = priv.params.q;\n  var g = priv.params.g;\n  var r = new BN(0);\n  var k;\n  var H = bits2int(hash, q).mod(q);\n  var s = false;\n  var kv = getKey(x, q, hash, algo);\n  while (s === false) {\n    k = makeKey(q, kv, algo);\n    r = makeR(g, k, p, q);\n    s = k.invm(q).imul(H.add(x.mul(r))).mod(q);\n    if (s.cmpn(0) === 0) {\n      s = false;\n      r = new BN(0);\n    }\n  }\n  return toDER(r, s);\n}\n\nfunction toDER(r, s) {\n  r = r.toArray();\n  s = s.toArray();\n\n  // Pad values\n  if (r[0] & 0x80) { r = [0].concat(r); }\n  if (s[0] & 0x80) { s = [0].concat(s); }\n\n  var total = r.length + s.length + 4;\n  var res = [\n    0x30, total, 0x02, r.length\n  ];\n  res = res.concat(r, [0x02, s.length], s);\n  return Buffer.from(res);\n}\n\nfunction getKey(x, q, hash, algo) {\n  x = Buffer.from(x.toArray());\n  if (x.length < q.byteLength()) {\n    var zeros = Buffer.alloc(q.byteLength() - x.length);\n    x = Buffer.concat([zeros, x]);\n  }\n  var hlen = hash.length;\n  var hbits = bits2octets(hash, q);\n  var v = Buffer.alloc(hlen);\n  v.fill(1);\n  var k = Buffer.alloc(hlen);\n  k = createHmac(algo, k).update(v).update(Buffer.from([0])).update(x).update(hbits).digest();\n  v = createHmac(algo, k).update(v).digest();\n  k = createHmac(algo, k).update(v).update(Buffer.from([1])).update(x).update(hbits).digest();\n  v = createHmac(algo, k).update(v).digest();\n  return { k: k, v: v };\n}\n\nfunction bits2int(obits, q) {\n  var bits = new BN(obits);\n  var shift = (obits.length << 3) - q.bitLength();\n  if (shift > 0) { bits.ishrn(shift); }\n  return bits;\n}\n\nfunction bits2octets(bits, q) {\n  bits = bits2int(bits, q);\n  bits = bits.mod(q);\n  var out = Buffer.from(bits.toArray());\n  if (out.length < q.byteLength()) {\n    var zeros = Buffer.alloc(q.byteLength() - out.length);\n    out = Buffer.concat([zeros, out]);\n  }\n  return out;\n}\n\nfunction makeKey(q, kv, algo) {\n  var t;\n  var k;\n\n  do {\n    t = Buffer.alloc(0);\n\n    while (t.length * 8 < q.bitLength()) {\n      kv.v = createHmac(algo, kv.k).update(kv.v).digest();\n      t = Buffer.concat([t, kv.v]);\n    }\n\n    k = bits2int(t, q);\n    kv.k = createHmac(algo, kv.k).update(kv.v).update(Buffer.from([0])).digest();\n    kv.v = createHmac(algo, kv.k).update(kv.v).digest();\n  } while (k.cmp(q) !== -1);\n\n  return k;\n}\n\nfunction makeR(g, k, p, q) {\n  return g.toRed(BN.mont(p)).redPow(k).fromRed().mod(q);\n}\n\nmodule.exports = sign;\nmodule.exports.getKey = getKey;\nmodule.exports.makeKey = makeKey;\n\n};"],
"names":["shadow$provide","global","require","module","exports","getKey","x","q","hash","algo","Buffer","from","toArray","length","byteLength","zeros","alloc","concat","hlen","bits","bits2int","mod","out","v","fill","k","createHmac","update","hbits","digest","obits","BN","shift","bitLength","ishrn","makeKey","kv","t","cmp","crt","EC","ec","parseKeys","curves","sign","key","hashType","signType","tag","priv","curve","Error","curveId","join","keyFromPrivate","privateKey","toDER","type","params","priv_key","p","g","r","H","s","toRed","mont","redPow","fromRed","invm","imul","add","mul","cmpn","res","undefined","padding","RSA_PKCS1_PADDING","len","modulus","pad","push","i"]
}
