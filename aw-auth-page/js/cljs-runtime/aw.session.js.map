{"version":3,"sources":["aw/session.cljs"],"mappings":";AAMA,gCAAA,iFAAA,jHAAKA;AACL,8BAAA,iFAAA,/GAAKC;AAEL,AAAKC,qBAAQ,gDAAA,2CAAA,3FAACC,mJAAeH;AAE7B,6BAAA,7BAAMI;AAAN,AACE,qGAAA,9FAACC,0DAAMH,mBAAQI,yEAAcC,oEAAUN;;AAEzC,+BAAA,/BAAMO;AAAN,AACE,sFAAA,tFAACH,mDAAMH,mBAAQO,wEAAaT;;AAC5B,uCAAA,hCAACU;;AAEH,AAAA,6BAAA,qCAAAC,lEAAME;AAAN,AAAA,IAAAD,WAAA,AAAA;AAAA,AAAA,QAAAA;KAAA;AAAA,OAAAC,yDAAA,CAAA,UAAA;;;KAAA;AAAA,OAAAA,yDAAA,CAAA,UAAA,MAAA,CAAA,UAAA;;;;AAAA,MAAA,KAAAC,MAAA,CAAA,8DAAA,AAAA;;;;;AAAA,CAAA,2DAAA,3DAAMD,sEACFE;AADJ,AACkB,OAACC,yDAAU,AAAA,sFAAA,AAAAC,gBAASf,qBAASa;;;AAD/C,CAAA,2DAAA,3DAAMF,sEAEFK,WAAWH;AAFf,AAGG,OAACI,4BAAc,iBAAAC,mBAAIF;AAAJ,AAAA,oBAAAE;AAAAA;;AAAA;;KAAoB,iBAAAA,mBAAIL;AAAJ,AAAA,oBAAAK;AAAAA;;AAAA;;;;;AAHtC,CAAA,qDAAA,rDAAMP;;AAAN,AAKA,+BAAA,/BAAMQ;AAAN,AACE,OAACC,0BAAYrB,4BAAiB,AAAA,sFAAA,AAAAgB,gBAASf","names":["aw.session/unauthorized-perms","aw.session/authorized-perms","aw.session/session","reagent.core.atom","aw.session/authorize!","cljs.core.swap_BANG_","cljs.core/update","clojure.set/union","aw.session/deauthorize!","cljs.core/assoc","aw.route-helpers/redirect!","var_args","G__25176","aw.session/perms-ok?","js/Error","object-perms","aw.session.perms_ok_QMARK_","cljs.core/deref","user-perms","clojure.set/superset?","or__5045__auto__","aw.session/authorized?","clojure.set/subset?"],"sourcesContent":["(ns aw.session\n  (:require\n   [aw.route-helpers :as rh]\n   [clojure.set :as set]\n   [reagent.core :as r]))\n\n(def unauthorized-perms #{:unauthorized-only})\n(def authorized-perms #{:authorized-only})\n\n(def session (r/atom {:perms unauthorized-perms}))\n\n(defn authorize! []\n  (swap! session update :perms set/union authorized-perms))\n\n(defn deauthorize! []\n  (swap! session assoc :perms unauthorized-perms)\n  (rh/redirect! :aw/signin))\n\n(defn perms-ok?\n  ([object-perms] (perms-ok? (:perms @session) object-perms))\n  ([user-perms object-perms]\n   (set/superset? (or user-perms #{}) (or object-perms #{}))))\n\n(defn authorized? []\n  (set/subset? authorized-perms (:perms @session)))\n"]}